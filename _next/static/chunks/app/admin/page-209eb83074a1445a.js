(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{1469:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return d},getImageProps:function(){return i}});let a=r(8229),s=r(8883),l=r(3063),o=a._(r(1193));function i(e){let{props:t}=(0,s.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let d=l.Image},3774:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var a=r(5155),s=r(2115),l=r(6874),o=r.n(l),i=r(5695),d=r(1362),n=r(351),c=r(760),g=r(6413);let m=[{name:"Home",path:"/"},{name:"Projects",path:"/projects"},{name:"Services",path:"/services"},{name:"Blog",path:"/blogs"},{name:"Contact",path:"/#contact"}];function u(){let[e,t]=(0,s.useState)(!1),[r,l]=(0,s.useState)(!1),{theme:u,setTheme:x}=(0,d.D)(),h=(0,i.usePathname)();(0,s.useEffect)(()=>{t(!0)},[]),(0,s.useEffect)(()=>{l(!1)},[h]);let b=()=>x("dark"===u?"light":"dark");return(0,a.jsx)("header",{className:"fixed top-0 left-0 w-full z-50 px-4 pt-4",children:(0,a.jsxs)("nav",{className:"notion-glass max-w-7xl mx-auto rounded-lg px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(o(),{href:"/",className:"font-semibold text-xl",children:"Nazzal"}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-8",children:[(0,a.jsx)("div",{className:"flex items-center space-x-6",children:m.map(e=>(0,a.jsx)(o(),{href:e.path,className:"text-sm font-medium transition-colors ".concat(h===e.path?"text-primary":"text-gray-600 hover:text-primary dark:text-gray-300 dark:hover:text-primary"),children:e.name},e.path))}),(0,a.jsx)("button",{onClick:b,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Toggle theme",children:e&&"dark"===u?(0,a.jsx)(n.Wh$,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}):(0,a.jsx)(n.hkc,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]}),(0,a.jsxs)("div",{className:"md:hidden flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:b,className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Toggle theme",children:e&&"dark"===u?(0,a.jsx)(n.Wh$,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}):(0,a.jsx)(n.hkc,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})}),(0,a.jsx)("button",{onClick:()=>l(!r),className:"p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors","aria-label":"Toggle menu",children:r?(0,a.jsx)(n.yGN,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"}):(0,a.jsx)(n.ND1,{className:"w-5 h-5 text-gray-600 dark:text-gray-300"})})]})]}),(0,a.jsx)(c.N,{children:r&&(0,a.jsx)(g.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},className:"md:hidden mt-4",children:(0,a.jsx)("div",{className:"flex flex-col space-y-4",children:m.map(e=>(0,a.jsx)(o(),{href:e.path,className:"text-sm font-medium transition-colors ".concat(h===e.path?"text-primary":"text-gray-600 hover:text-primary dark:text-gray-300 dark:hover:text-primary"),children:e.name},e.path))})})})]})})}},5645:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var a=r(5155),s=r(6874),l=r.n(s),o=r(351);function i(){return(0,a.jsx)("footer",{className:"bg-gray-50 dark:bg-gray-900 py-8",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[(0,a.jsx)("div",{className:"mb-4 md:mb-0",children:(0,a.jsxs)("p",{className:"text-gray-600 dark:text-gray-400",children:["\xa9 ",new Date().getFullYear()," Nazzal Kausar. All rights reserved."]})}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)(l(),{href:"https://github.com/nazzal5448",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",children:(0,a.jsx)(o.BR8,{className:"w-5 h-5"})}),(0,a.jsx)(l(),{href:"https://linkedin.com/in/nazzal-kausar",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",children:(0,a.jsx)(o.Wjy,{className:"w-5 h-5"})}),(0,a.jsx)(l(),{href:"https://x.com/iamnazzal",target:"_blank",rel:"noopener noreferrer",className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",children:(0,a.jsx)(o.TC4,{className:"w-5 h-5"})}),(0,a.jsx)(l(),{href:"mailto:hello@nazzalkausar.com",className:"text-gray-600 hover:text-gray-900 dark:text-gray-400 dark:hover:text-white transition-colors",children:(0,a.jsx)(o.pHD,{className:"w-5 h-5"})})]})]})})})}},6766:(e,t,r)=>{"use strict";r.d(t,{default:()=>s.a});var a=r(1469),s=r.n(a)},7774:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),s=r(2115),l=r(2108),o=r(5695),i=r(3774),d=r(5645),n=r(351),c=r(6766);function g(e){let{defaultImageUrl:t,onImageChange:r}=e,[l,o]=(0,s.useState)(t||""),[i,d]=(0,s.useState)(!1),[g,m]=(0,s.useState)(""),u=(0,s.useRef)(null),x=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if(console.log("Selected file:",a.name,a.type,"".concat(a.size/1024," KB")),!a.type.startsWith("image/")){m("Please select an image file");return}if(a.size>5242880){m("Image must be less than 5MB");return}m(""),d(!0);try{console.log("Creating form data for upload");let e=new FormData;e.append("file",a),e.append("type","image"),console.log("Sending request to /api/upload");let t=await fetch("/api/upload",{method:"POST",body:e});if(console.log("Upload response status:",t.status),!t.ok){let e=await t.json().catch(()=>({}));throw console.error("Upload failed with error:",e),Error("Failed to upload image: ".concat(e.message||t.statusText))}let s=await t.json();console.log("Upload successful, received URL:",s.url),o(s.url),r(s.url)}catch(t){console.error("Upload error:",t);let e=t instanceof Error?t.message:"Unknown error occurred";m("Failed to upload image: ".concat(e))}finally{d(!1)}}};return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium",children:"Image"}),(0,a.jsx)("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-4",children:l?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"relative h-64 w-full",children:(0,a.jsx)(c.default,{src:l,alt:"Preview",fill:!0,className:"object-contain rounded",onError:()=>{console.error("Image load error"),o("/placeholder-image.jpg")}})}),(0,a.jsx)("button",{type:"button",onClick:()=>{o(""),r(""),u.current&&(u.current.value="")},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600",children:(0,a.jsx)(n.yGN,{})})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-8",children:[(0,a.jsx)(n.fZZ,{className:"w-12 h-12 text-gray-400 mb-2"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Drag and drop an image here, or click to select"}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;null===(e=u.current)||void 0===e||e.click()},className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",disabled:i,children:i?"Uploading...":"Select Image"}),(0,a.jsx)("input",{type:"file",ref:u,onChange:x,accept:"image/*",className:"hidden"})]})}),g&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:g})]})}function m(e){let{defaultVideoUrl:t="",onVideoChange:r}=e,[l,o]=(0,s.useState)(t),[i,d]=(0,s.useState)(!!(null==t?void 0:t.includes("youtube.com"))||!!(null==t?void 0:t.includes("vimeo.com"))),[c,g]=(0,s.useState)(!1),[m,u]=(0,s.useState)(""),x=async e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if(!a.type.startsWith("video/")){u("Please select a video file");return}if(a.size>0x3200000){u("Video must be less than 50MB");return}u(""),g(!0);try{let e=new FormData;e.append("file",a),e.append("type","video");let t=await fetch("/api/upload",{method:"POST",body:e});if(!t.ok)throw Error("Upload failed");let s=await t.json();o(s.url),r(s.url)}catch(e){console.error("Error uploading video:",e),u("Failed to upload video. Please try again.")}finally{g(!1)}}};return(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,a.jsx)("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 rounded ".concat(i?"bg-gray-100 dark:bg-gray-700":"bg-blue-600 text-white"),children:"Upload Video"}),(0,a.jsx)("button",{type:"button",onClick:()=>d(!0),className:"px-4 py-2 rounded ".concat(i?"bg-blue-600 text-white":"bg-gray-100 dark:bg-gray-700"),children:"Embed Video"})]}),i?(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Video URL (YouTube/Vimeo)"}),(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsx)("input",{type:"url",value:l,onChange:e=>{let t=e.target.value;o(t),r(t)},placeholder:"https://youtube.com/watch?v=...",className:"flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700"})}),l&&(0,a.jsx)("div",{className:"mt-4 aspect-video w-full",children:(0,a.jsx)("iframe",{src:(e=>{if(e.includes("youtube.com")||e.includes("youtu.be")){var t;let r=e.includes("youtu.be")?e.split("youtu.be/")[1]:null===(t=e.split("v=")[1])||void 0===t?void 0:t.split("&")[0];return"https://www.youtube.com/embed/".concat(r)}if(e.includes("vimeo.com")){let t=e.split("vimeo.com/")[1];return"https://player.vimeo.com/video/".concat(t)}return e})(l),className:"w-full h-full rounded-lg",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Upload Video File"}),(0,a.jsx)("div",{className:"flex items-center justify-center w-full",children:(0,a.jsxs)("label",{className:"w-full flex flex-col items-center px-4 py-6 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 rounded-lg border-2 border-dashed cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-600",children:[(0,a.jsx)(n.B88,{className:"w-8 h-8 mb-2"}),(0,a.jsx)("span",{className:"text-sm",children:c?"Uploading...":"Click to upload video"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"MP4, WebM up to 50MB"}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:"video/*",onChange:x,disabled:c})]})}),l&&!i&&(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)("video",{src:l,controls:!0,className:"w-full rounded-lg"})})]}),m&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:m})]})}var u=r(3568);function x(e){return"project"===e.type}function h(e){let{contentType:t,item:r,onSave:l,onCancel:o}=e,[i,d]=(0,s.useState)({title:"",slug:"",excerpt:"",description:"",content:"",date:new Date().toISOString().split("T")[0],category:"",tags:[],image:"",githubUrl:"",demoUrl:"",videoUrl:""}),[c,h]=(0,s.useState)(!1),[b,p]=(0,s.useState)("");(0,s.useEffect)(()=>{r&&d({title:r.title||"",slug:r.slug||"",excerpt:x(r)?r.excerpt||"":r.excerpt,description:x(r)&&r.description||"",content:r.content||"",date:r.date||"",category:r.category||"",tags:Array.isArray(r.tags)?r.tags:[],image:r.image||"",githubUrl:x(r)&&r.githubUrl||"",demoUrl:x(r)&&r.demoUrl||"",videoUrl:r.videoUrl||"",id:r.id||"",_id:r._id||""})},[r]);let y=e=>{let{name:t,value:r}=e.target;d(e=>({...e,[t]:r}))},f=e=>e=(e=(e=e.replace(/https?:\/\/(?:www\.)?youtube\.com\/watch\?v=([a-zA-Z0-9_-]+)/g,'<div class="video-embed"><iframe width="100%" height="400" src="https://www.youtube.com/embed/$1" frameborder="0" allowfullscreen></iframe></div>')).replace(/https?:\/\/(?:www\.)?vimeo\.com\/([0-9]+)/g,'<div class="video-embed"><iframe width="100%" height="400" src="https://player.vimeo.com/video/$1" frameborder="0" allowfullscreen></iframe></div>')).replace(/```(\w+)?\n([\s\S]+?)\n```/g,'<pre class="code-block language-$1"><code>$2</code></pre>'),j=async e=>{e.preventDefault(),h(!0);try{let e,a=f(i.content);e="blog"===t?{type:"blog",title:i.title,slug:i.slug,excerpt:i.excerpt,content:a,date:i.date,category:i.category||"Uncategorized",image:i.image||"/images/default-blog.jpg",tags:i.tags,videoUrl:i.videoUrl}:{type:"project",title:i.title,slug:i.slug,description:i.description,excerpt:i.excerpt,content:a,date:i.date,category:i.category||"Other",image:i.image||"/images/default-project.jpg",tags:i.tags,githubUrl:i.githubUrl,demoUrl:i.demoUrl,videoUrl:i.videoUrl},(null==r?void 0:r._id)&&(e._id=r._id),(null==r?void 0:r.id)&&(e.id=r.id),console.log("Submitting data:",e),await l(e)}catch(e){console.error("Error submitting form:",e),u.oR.error("Failed to save content. Please try again.")}finally{h(!1)}},v=e=>{d(t=>({...t,tags:t.tags.filter(t=>t!==e)}))},N=()=>{let e=i.title.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();d(t=>({...t,slug:e}))};return(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:r?"Edit ".concat("blog"===t?"Blog Post":"Project"):"Add New ".concat("blog"===t?"Blog Post":"Project")}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:j,disabled:c,className:"flex items-center gap-2 px-4 py-2 ".concat(c?"bg-gray-400":"bg-green-600 hover:bg-green-700"," text-white rounded"),children:[(0,a.jsx)(n.Bc_,{})," ",c?"Saving...":"Save"]}),(0,a.jsxs)("button",{onClick:o,disabled:c,className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:[(0,a.jsx)(n.yGN,{})," Cancel"]})]})]}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Title"}),(0,a.jsx)("input",{type:"text",name:"title",value:i.title,onChange:y,onBlur:()=>!i.slug&&N(),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Slug"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",name:"slug",value:i.slug,onChange:y,className:"flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700",required:!0}),(0,a.jsx)("button",{type:"button",onClick:N,className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Generate"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Excerpt"}),(0,a.jsx)("textarea",{name:"excerpt",value:i.excerpt,onChange:y,rows:3,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700",required:!0})]}),(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(g,{defaultImageUrl:i.image,onImageChange:e=>d({...i,image:e})})}),"project"===t&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Video"}),(0,a.jsx)(m,{defaultVideoUrl:i.videoUrl,onVideoChange:e=>d({...i,videoUrl:e})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",value:i.description,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",rows:3,placeholder:"Enter a brief description of your project"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"blog"===t?"Content":"Detailed Description"}),(0,a.jsx)("textarea",{id:"content",name:"content",value:i.content,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:text-white",rows:10,placeholder:"blog"===t?"Write your blog post content here...":"Write your project details here..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Date"}),(0,a.jsx)("input",{type:"date",name:"date",value:i.date,onChange:y,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Category"}),(0,a.jsx)("input",{type:"text",name:"category",value:i.category,onChange:y,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700",required:!0})]})]}),"project"===t&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"GitHub URL"}),(0,a.jsx)("input",{type:"text",name:"githubUrl",value:i.githubUrl,onChange:y,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Demo URL"}),(0,a.jsx)("input",{type:"text",name:"demoUrl",value:i.demoUrl,onChange:y,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Tags"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-2",children:i.tags.map(e=>(0,a.jsxs)("div",{className:"flex items-center bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded-full px-3 py-1",children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)("button",{type:"button",onClick:()=>v(e),className:"ml-2 text-blue-600 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-100",children:"\xd7"})]},e))}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:b,onChange:e=>p(e.target.value),placeholder:"Add a tag",className:"flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded-md dark:bg-gray-700"}),(0,a.jsx)("button",{type:"button",onClick:()=>{""===b.trim()||i.tags.includes(b.trim())||(d(e=>({...e,tags:[...e.tags,b.trim()]})),p(""))},className:"px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add"})]})]})]})]})}function b(e){var t;let{contentType:r,onContentTypeChange:s,onAddNew:o}=e,{data:i}=(0,l.useSession)();return(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center pb-4 border-b gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),(null==i?void 0:null===(t=i.user)||void 0===t?void 0:t.email)&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Logged in as: ",i.user.email]})]}),(0,a.jsxs)("button",{onClick:()=>(0,l.signOut)({callbackUrl:"/"}),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:[(0,a.jsx)(n.QeK,{})," Sign Out"]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>s("blog"),className:"px-4 py-2 rounded-lg ".concat("blog"===r?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"),children:"Blog Posts"}),(0,a.jsx)("button",{onClick:()=>s("project"),className:"px-4 py-2 rounded-lg ".concat("project"===r?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 dark:bg-gray-700 dark:text-gray-300"),children:"Projects"})]}),(0,a.jsxs)("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,a.jsx)(n.GGD,{})," Add New ","blog"===r?"Blog Post":"Project"]})]})]})}function p(){let e=(0,o.useRouter)(),{data:t,status:r}=(0,l.useSession)(),[c,g]=(0,s.useState)("blog"),[m,x]=(0,s.useState)("list"),[p,y]=(0,s.useState)([]),[f,j]=(0,s.useState)(null);console.log("Admin page - Auth status:",r,"User:",null==t?void 0:t.user),(0,s.useEffect)(()=>{"unauthenticated"===r&&e.push("/auth/signin")},[r,e]);let v=(0,s.useCallback)(async()=>{if("authenticated"!==r)return;let e="blog"===c?"/api/blogPosts":"/api/projects";try{let t=await fetch(e);if(!t.ok)throw Error("HTTP error! status: ".concat(t.status));let r=await t.json();y(r)}catch(e){console.error("Error fetching items:",e instanceof Error?e.message:"Unknown error occurred"),u.oR.error("Failed to fetch items")}},[r,c]);(0,s.useEffect)(()=>{"authenticated"===r&&v()},[r,c,v]),(0,s.useEffect)(()=>{let e=e=>{e.preventDefault(),console.log("Error caught:",e.message)};return window.addEventListener("error",e),()=>{window.removeEventListener("error",e)}},[]);let N=e=>{j(e),x("edit")},k=async e=>{try{let t="blog"===c?"/api/blogPosts":"/api/projects";console.log("Saving item:",e);let r=await fetch(t,{method:"add"===m?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw Error("HTTP error! status: ".concat(r.status));await v(),x("list"),u.oR.success("".concat("blog"===c?"Blog post":"Project"," saved successfully!"));try{if(!(await fetch("/api/trigger-build",{method:"POST"})).ok)throw Error("Failed to trigger build");u.oR.success("Build process started!")}catch(e){console.error("Error triggering build:",e),u.oR.error("Failed to start build process")}}catch(e){console.error("Error saving item:",e instanceof Error?e.message:"Unknown error occurred"),u.oR.error("Failed to save item")}};return"loading"===r?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{children:"Loading admin dashboard..."})]})}):"authenticated"===r&&(null==t?void 0:t.user)&&t.user.isAdmin?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[(0,a.jsx)(i.default,{}),(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)(b,{contentType:c,onContentTypeChange:g,onAddNew:()=>{j(null),x("add")}}),"list"===m?(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:p.map(e=>(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:e.title}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.date).toLocaleDateString()}),(0,a.jsx)("div",{className:"mt-4 flex justify-end",children:(0,a.jsx)("button",{onClick:()=>N(e),className:"text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:(0,a.jsx)(n.SG1,{className:"w-5 h-5"})})})]},e._id))}):(0,a.jsx)(h,{contentType:c,item:f,onSave:k,onCancel:()=>x("list")})]}),(0,a.jsx)(d.default,{})]}):null}},9769:(e,t,r)=>{Promise.resolve().then(r.bind(r,7774))}},e=>{var t=t=>e(e.s=t);e.O(0,[844,874,414,63,108,568,441,684,358],()=>t(9769)),_N_E=e.O()}]);